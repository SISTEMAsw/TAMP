/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

!function(){var e,t,n;!function(i){function o(e,t){return v.call(e,t)}function r(e,t){var n,i,o,r,s,l,u,a,f,c,d,p=t&&t.split("/"),y=x.map,m=y&&y["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=e.split("/"),s=e.length-1,x.nodeIdCompat&&b.test(e[s])&&(e[s]=e[s].replace(b,"")),e=p.concat(e),f=0;f<e.length;f+=1)if(d=e[f],"."===d)e.splice(f,1),f-=1;else if(".."===d){if(1===f&&(".."===e[2]||".."===e[0]))break;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&y){for(n=e.split("/"),f=n.length;f>0;f-=1){if(i=n.slice(0,f).join("/"),p)for(c=p.length;c>0;c-=1)if(o=y[p.slice(0,c).join("/")],o&&(o=o[i])){r=o,l=f;break}if(r)break;!u&&m&&m[i]&&(u=m[i],a=f)}!r&&u&&(r=u,l=a),r&&(n.splice(0,l,r),e=n.join("/"))}return e}function s(e,t){return function(){return p.apply(i,w.call(arguments,0).concat([e,t]))}}function l(e){return function(t){return r(t,e)}}function u(e){return function(t){g[e]=t}}function a(e){if(o(h,e)){var t=h[e];delete h[e],M[e]=!0,d.apply(i,t)}if(!o(g,e)&&!o(M,e))throw new Error("No "+e);return g[e]}function f(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return x&&x.config&&x.config[e]||{}}}var d,p,y,m,g={},h={},x={},M={},v=Object.prototype.hasOwnProperty,w=[].slice,b=/\.js$/;y=function(e,t){var n,i=f(e),o=i[0];return e=i[1],o&&(o=r(o,t),n=a(o)),o?e=n&&n.normalize?n.normalize(e,l(t)):r(e,t):(e=r(e,t),i=f(e),o=i[0],e=i[1],o&&(n=a(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},m={require:function(e){return s(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:c(e)}}},d=function(e,t,n,r){var l,f,c,d,p,x,v=[],w=typeof n;if(r=r||e,"undefined"===w||"function"===w){for(t=!t.length&&n.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if(d=y(t[p],r),f=d.f,"require"===f)v[p]=m.require(e);else if("exports"===f)v[p]=m.exports(e),x=!0;else if("module"===f)l=v[p]=m.module(e);else if(o(g,f)||o(h,f)||o(M,f))v[p]=a(f);else{if(!d.p)throw new Error(e+" missing "+f);d.p.load(d.n,s(r,!0),u(f),{}),v[p]=g[f]}c=n?n.apply(g[e],v):void 0,e&&(l&&l.exports!==i&&l.exports!==g[e]?g[e]=l.exports:c===i&&x||(g[e]=c))}else e&&(g[e]=n)},e=t=p=function(e,t,n,o,r){if("string"==typeof e)return m[e]?m[e](t):a(y(e,t).f);if(!e.splice){if(x=e,x.deps&&p(x.deps,x.callback),!t)return;t.splice?(e=t,t=n,n=null):e=i}return t=t||function(){},"function"==typeof n&&(n=o,o=r),o?d(i,e,t,n):setTimeout(function(){d(i,e,t,n)},4),p},p.config=function(e){return p(e)},e._defined=g,n=function(e,t,n){t.splice||(n=t,t=[]),o(g,e)||o(h,e)||(h[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("almond",function(){}),n("layers/layer-base",[],function(){var e=Backbone.Model.extend({defaults:function(){return{opacity:1,ordinal:-1,mimeTypeHandlers:[]}},registerMimeTypeHandler:function(e,t){var n=!1;return this.get("mimeTypeHandlers")[e]&&(n=!0),this.get("mimeTypeHandlers")[e]=t,n},getMimeTypeHandlers:function(){return this.get("mimeTypeHandlers")}});return e}),n("layers/layer-wms",["layers/layer-base"],function(e){var t=e.extend({defaults:_.extend({},VMANIP.Layer.Base.prototype.defaults(),{protocol:"WMS",style:"default",crs:"EPSG:4326",format:"image/png",version:"1.0.0"})});return t}),n("layers/layer-wcs",["layers/layer-base"],function(e){var t=e.extend({defaults:_.extend({},VMANIP.Layer.Base.prototype.defaults(),{protocol:"WCS",version:"2.0.0"})});return t}),n("vmanip",["layers/layer-base","layers/layer-wms","layers/layer-wcs"],function(e,t,n){var i={};return i.Layers={},i.Layers.Base=e,i.Layers.WMS=t,i.Layers.WCS=n,i.Modules={},i.Context=function(e){this.id=e.id,console.log('[Context] "'+this.id+'" initialized')},i.Runtime=function(){this.modules={},console.log("[Runtime] initialized")},i.Runtime.prototype.addModule=function(e,t){e.setContext(t),this.modules[e.id]=e},i.Runtime.prototype.listModules=function(){console.log("[Runtime] registered modules:");for(var e in this.modules)this.modules.hasOwnProperty(e)&&console.log("    * "+this.modules[e].id)},i.Runtime.prototype.showModules=function(e){console.log('[Runtime] showing module "'+e+'"')},i.Modules.Base=function(e){this.id=e.id,console.log('[Module] "'+this.id+'" initialized')},i.Module.prototype.setContext=function(e){this.context=e,console.log('[Module] set context "'+this.context.id+'" on "'+this.id+'"')},i.Modules.VirtualGlobeViewer=function(e){this.id=e.id,console.log('[Module] "'+this.id+'" initialized')},i.Modules.VirtualGlobeViewer.prototype.setContext=function(e){this.context=e,console.log('[Module] set context "'+this.context.id+'" on "'+this.id+'"')},window.VMANIP=i,i}),t(["vmanip"])}();