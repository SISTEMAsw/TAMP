(function(){"use strict";var a=this;a.define(["backbone","communicator","globals","hbs!tmpl/Processes","hbs!tmpl/wcs_calculate_average","hbs!tmpl/wps_pep_spatial_average","hbs!tmpl/wps_pep_temporal_average","underscore","libcoverage"],function(a,b,c,d,e,f,g){var h=a.Marionette.ItemView.extend({tagName:"div",id:"processes",className:"panel panel-default",template:{type:"handlebars",template:d},modelEvents:{},events:{},initialize:function(a){this.wps_url="http://vtdas-dave.zamg.ac.at/davprc/ows?"},onShow:function(a){this.$(".close").on("click",_.bind(this.onClose,this)),this.$el.draggable({containment:"#content",scroll:!1,handle:".panel-heading"});var c=this;this.$el.find(".panel-body").append('<button type="button" id="calculateSpatialAverage" class="btn btn-success" style="width:100%;">Calculate Spatial Average</button>'),this.$el.find(".panel-body").append('<button type="button" id="calculateTemporalAverage" class="btn btn-success" style="width:100%;">Calculate Temporal Average</button>'),$("#calculateSpatialAverage").click(function(){var a=b.reqres.request("selections:get:all");if(a.actProd.length>0)if(a.geo){var d="ALARO_Surface_pressure_surface_4326_0059882",e=f({left:a.geo.left,right:a.geo.right,top:a.geo.top,bottom:a.geo.bottom,begin_time:a.time.start.getTime()/1e3,collection_id:d});$.ajax({type:"POST",url:c.wps_url,data:e,success:function(a){$("#pickingresults").show(),$("#pickingresults").empty(),$("#pickingresults").append('<button type="button" id="pickingresultsClose" class="close" style="margin-right:5px; margin-top:5px;"><i class="fa fa-times-circle"></i></button>'),$("#pickingresults").append('<div style="margin: 0 auto; width: 80%; margin-top: 10%;" id="prcontainer"></div>'),$("#prcontainer").append(a),$("#pickingresultsClose").click(function(){$("#pickingresults").hide(),$("#pickingresults").empty()})}})}else $("#error-messages").append('<div class="alert alert-warning alert-danger"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>Info:</strong> Please make sure an area of interest has been selected with the bounding box tool.</div>');else $("#error-messages").append('<div class="alert alert-warning alert-danger"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>Info:</strong> Please make sure an appropiate collection has been selected from the Layers menu before executing this process.</div>')}),$("#calculateTemporalAverage").click(function(){var a=b.reqres.request("selections:get:all");if(a.actProd.length>0)if(a.geo){var d="ALARO_Surface_pressure_surface_4326_0059882",e=g({left:a.geo.left,right:a.geo.right,top:a.geo.top,bottom:a.geo.bottom,begin_time:Math.round(a.time.start.getTime()/1e3),end_time:Math.round(a.time.end.getTime()/1e3),collection_id:d});$.ajax({type:"POST",url:c.wps_url,data:e,success:function(a){$("#pickingresults").show(),$("#pickingresults").empty(),$("#pickingresults").append('<button type="button" id="pickingresultsClose" class="close" style="margin-right:5px; margin-top:5px;"><i class="fa fa-times-circle"></i></button>'),$("#pickingresults").append('<div style="margin: 0 auto; width: 80%; margin-top: 10%;" id="prcontainer"></div>'),$("#prcontainer").append(a),$("#pickingresultsClose").click(function(){$("#pickingresults").hide(),$("#pickingresults").empty()})}})}else $("#error-messages").append('<div class="alert alert-warning alert-danger"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>Info:</strong> Please make sure an area of interest has been selected with the bounding box tool.</div>');else $("#error-messages").append('<div class="alert alert-warning alert-danger"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>Info:</strong> Please make sure an appropiate collection has been selected from the Layers menu before executing this process.</div>')})},onClose:function(){this.close()}});return{ProcessesView:h}})}).call(this);