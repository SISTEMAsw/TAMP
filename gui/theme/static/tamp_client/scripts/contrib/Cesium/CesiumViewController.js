define(["backbone.marionette","app","communicator","./CesiumView"],function(a,b,c,d){"use strict";var e=Backbone.Marionette.Controller.extend({initialize:function(a){this.id=a.id,this.startPosition=a.startPosition,this.cesiumView=new d({startPosition:a.startPosition})},getView:function(a){return this.cesiumView},centerAndZoom:function(a,b,c){this.cesiumView.centerMap({x:a,y:b,l:c})},toggleDebug:function(){this.cesiumView.toggleDebug()},connectToView:function(){this.cesiumView.listenTo(c.mediator,"map:set:extent",_.bind(this.cesiumView.onSetExtent,this.cesiumView)),this.cesiumView.listenTo(c.mediator,"map:change:zoom",_.bind(this.cesiumView.onChangeZoom,this.cesiumView)),this.cesiumView.listenTo(c.mediator,"map:layer:change",_.bind(this.cesiumView.changeLayer,this.cesiumView)),this.cesiumView.listenTo(c.mediator,"productCollection:sortUpdated",_.bind(this.cesiumView.onSortProducts,this.cesiumView)),this.cesiumView.listenTo(c.mediator,"productCollection:updateOpacity",_.bind(this.cesiumView.onUpdateOpacity,this.cesiumView)),this.cesiumView.listenTo(c.mediator,"selection:activated",_.bind(this.cesiumView.onSelectionActivated,this.cesiumView)),this.cesiumView.listenTo(c.mediator,"selection:changed",_.bind(this.cesiumView.onSelectionChanged,this.cesiumView)),this.cesiumView.listenTo(c.mediator,"cesium:highlight:point",_.bind(this.cesiumView.onHighlightPoint,this.cesiumView)),this.cesiumView.listenTo(c.mediator,"cesium:highlight:removeAll",_.bind(this.cesiumView.onRemoveHighlights,this.cesiumView)),this.cesiumView.listenTo(c.mediator,"layer:parameters:changed",_.bind(this.cesiumView.OnLayerParametersChanged,this.cesiumView)),this.cesiumView.listenTo(c.mediator,"layer:range:changed",_.bind(this.cesiumView.onLayerRangeChanged,this.cesiumView)),this.cesiumView.listenTo(c.mediator,"time:change",_.bind(this.cesiumView.onTimeChange,this.cesiumView)),c.reqres.setHandler("map:get:extent",_.bind(this.cesiumView.onGetMapExtent,this.cesiumView)),this.cesiumView.listenTo(this.cesiumView.model,"change",function(a,b){})},getStartPosition:function(){return this.startPosition},isActive:function(){return!this.cesiumView.isClosed}});return e});