define(["backbone.marionette","app","communicator","./VirtualGlobeViewController","./VirtualGlobeViewRouter"],function(a,b,c,d,e){"use strict";b.module("VirtualGlobeViewer",function(a){this.startsWithParent=!1,this.on("start",function(a){this.instances={},this.idx=0,console.log("[VirtualGlobeViewer] Finished module initialization")}),this.createController=function(a){var c=void 0,e=void 0;"undefined"!=typeof a?(c=a.id,e=a.startPosition):e={center:[15,47],distance:24e5,duration:100,tilt:40};for(var f in this.instances)if(!this.instances[f].isActive())return console.log("Free globe viewer returned "+f),this.instances[f];"undefined"==typeof c&&(c="VirtualGlobeViewer."+this.idx++);var g=new d({id:c,startPosition:e});return this.instances[c]=g,b(g),g};var b=function(a){var b=new keypress.Listener;b.simple_combo("a",function(){a.zoomTo(a.getStartPosition())});var c=300;b.simple_combo("1",function(){a.setTilt(90,c)}),b.simple_combo("num_1",function(){a.setTilt(90,c)}),b.simple_combo("2",function(){a.setTilt(45,c)}),b.simple_combo("num_2",function(){a.setTilt(45,c)}),b.simple_combo("3",function(){a.setTilt(15,c)}),b.simple_combo("num_3",function(){a.setTilt(15,c)})}})});