(function(){"use strict";var a=this;a.require(["backbone","communicator","app","globals"],function(a,b,c,d){var e=a.Marionette.Controller.extend({initialize:function(a){this.listenTo(b.mediator,"dialog:open:about",this.onDialogOpenAbout),this.listenTo(b.mediator,"ui:open:layercontrol",this.onLayerControlOpen),this.listenTo(b.mediator,"ui:open:toolselection",this.onToolSelectionOpen),this.listenTo(b.mediator,"ui:open:options",this.onOptionsOpen),this.listenTo(b.mediator,"ui:open:storybanner",this.StoryBannerOpen),this.listenTo(b.mediator,"app:reset",this.OnAppReset),this.listenTo(b.mediator,"layer:open:settings",this.onOpenLayerSettings),this.listenTo(b.mediator,"ui:fullscreen:globe",this.onFullscrenGlobe),this.listenTo(b.mediator,"ui:fullscreen:analytics",this.onFullscrenAnalytics)},onFullscrenGlobe:function(){b.mediator.trigger("layout:switch:singleview")},onFullscrenAnalytics:function(){b.mediator.trigger("layout:switch:singleview"),b.mediator.trigger("region:show:view","tl","AVViewer"),this.listenTo(b.mediator,"ui:open:processes",this.onProcessesOpen)},onDialogOpenAbout:function(a){c.dialogRegion.show(c.DialogContentView)},onLayerControlOpen:function(a){_.isUndefined(c.layout.isClosed)||c.layout.isClosed?(c.leftSideBar.show(c.layout),c.layout.baseLayers.show(c.baseLayerView),c.layout.products.show(c.productsView),c.layout.overlays.show(c.overlaysView)):c.layout.close()},onToolSelectionOpen:function(a){_.isUndefined(c.toolLayout.isClosed)||c.toolLayout.isClosed?(c.rightSideBar.show(c.toolLayout),c.toolLayout.selection.show(c.selectionToolsView),c.toolLayout.visualization.show(c.visualizationToolsView),c.toolLayout.mapmode.show(c.visualizationModesView)):c.toolLayout.close()},onOptionsOpen:function(a){_.isUndefined(c.optionsLayout.isClosed)||c.optionsLayout.isClosed?(c.optionsBar.show(c.optionsLayout),c.optionsLayout.colorramp.show(c.colorRampView)):c.optionsLayout.close()},onProcessesOpen:function(a){_.isUndefined(c.processesView.isClosed)||c.processesView.isClosed?c.viewContent.show(c.processesView):c.viewContent.close()},StoryBannerOpen:function(a){c.storyBanner=new c.views.StoryBannerView({template:c.templates[a]}),_.isUndefined(c.storyView.isClosed)||c.storyView.isClosed?c.storyView.show(c.storyBanner):c.storyView.close()},OnAppReset:function(){b.mediator.trigger("selection:changed",null),c.layout.close(),c.toolLayout.close(),c.optionsLayout.close(),c.optionsBar.close()},onOpenLayerSettings:function(a){d.products.each(function(b){b.get("views")[0].id==a&&(_.isUndefined(c.layerSettings.isClosed)||c.layerSettings.isClosed?(c.layerSettings.setModel(b),c.optionsBar.show(c.layerSettings)):c.layerSettings.sameModel(b)?c.optionsBar.close():(c.layerSettings.setModel(b),c.optionsBar.show(c.layerSettings)))})}});return new e})}).call(this);