(function(){"use strict";var a=this;a.require(["backbone","communicator","globals","app"],function(a,b,c,d){var e=a.Marionette.Controller.extend({initialize:function(a){this.listenTo(b.mediator,"layer:activate",this.layerActivate),this.listenTo(b.mediator,"app:reset",this.OnAppReset),this.layercontrolopen=!1},layerActivate:function(a){var a=c.products.find(function(b){return b.get("views")?b.get("views")[0].id==a:!1}),d={};a&&(a.get("visible")?(d={name:a.get("name"),isBaseLayer:!1,visible:!1},a.set("visible",!1)):(d={name:a.get("name"),isBaseLayer:!1,visible:!0},a.set("visible",!0)),b.mediator.trigger("map:layer:change",d))},OnAppReset:function(){c.products.each(function(a){if(a.get("visible")){var c={name:a.get("name"),isBaseLayer:!1,visible:!1};a.set("visible",!1),b.mediator.trigger("map:layer:change",c)}})}});return new e})}).call(this);